<%- include('./layout/header.ejs', title="Edit User")%>
<div class="container_form">
    <h1>Editar Usuario</h1>
    <form class="form_create_users" id="formEdit" action="/users/edit" method="POST">
        <input type="text" id="id" value="<%= user.id%>" hidden>
        <label for="nombres">Nombres:</label>
        <input type="text" id="nombres" name="nombres" value="<%= user.nombres%>">
        <label for="apellidos">Apellidos:</label>
        <input type="text" id="apellidos" name="apellidos" value="<%= user.apellidos%>">
        <label for="edad">Edad:</label>
        <input type="number" id="edad" name="edad" value="<%= user.edad%>">
        <button type="submit">Editar</button>
    </form>
</div>

<%- include('./layout/footer.ejs')%>

<script>
    let formEdit = document.getElementById('formEdit');
    formEdit.addEventListener('submit', function editUser(e){
        e.preventDefault();
        let id = document.getElementById('id').value;
        let nombres = document.getElementById('nombres').value;
        let apellidos = document.getElementById('apellidos').value;
        let edad = document.getElementById('edad').value;
        console.log(id);
        try {
        const options = {
            method: 'PUT',
            headers: {'Content-Type': 'application/json'},
            body: JSON.stringify({
                nombres: nombres,
                apellidos: apellidos,
                edad: edad
            })
        }
    
        fetch('http://localhost:3000/users/'+id, options)
        window.location.href='/users/lista'
        
        
    } catch (error) {
        console.log(error);
    }

    })
</script>